{% extends 'dispositivos/base.html' %}

{% block title %}Abrir Novo Chamado{% endblock %}

{% block content %}
    <h1 class="h2">Abrir Novo Chamado</h1>
    <p>Descreva o problema e as informações relacionadas abaixo.</p>
    <hr>

    <div class="card p-4">
        <form method="POST" novalidate>
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="{{ form.titulo.id_for_label }}" class="form-label">{{ form.titulo.label }}</label>
                {{ form.titulo }}
            </div>
            <div class="mb-3">
                <label for="{{ form.descricao_problema.id_for_label }}" class="form-label">{{ form.descricao_problema.label }}</label>
                {{ form.descricao_problema }}
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="{{ form.setores.id_for_label }}" class="form-label">{{ form.setores.label }}</label>
                    {{ form.setores }}
                </div>
                <div class="col-md-6 mb-3">
                    <label for="{{ form.usuario.id_for_label }}" class="form-label">{{ form.usuario.label }}</label>
                    {{ form.usuario }}
                </div>
            </div>
            <br>
            <div>
                <a href="{% url 'dispositivos:lista_chamados' %}" class="btn btn-secondary">Cancelar</a>
                <button type="submit" class="btn btn-primary">Abrir Chamado</button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const formFields = document.querySelectorAll('form select, form input, form textarea');
            formFields.forEach(function(field) {
                if (field.type !== 'checkbox') {
                    field.classList.add('form-control');
                }
            });
        });
    </script>
{% endblock %}